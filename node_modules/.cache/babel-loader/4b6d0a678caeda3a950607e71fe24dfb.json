{"ast":null,"code":"import _objectSpread from\"/Users/macos10.12/Documents/GitHub/SoftwareDesignGroup23/fuel-quote-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/macos10.12/Documents/GitHub/SoftwareDesignGroup23/fuel-quote-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/macos10.12/Documents/GitHub/SoftwareDesignGroup23/fuel-quote-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/macos10.12/Documents/GitHub/SoftwareDesignGroup23/fuel-quote-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/macos10.12/Documents/GitHub/SoftwareDesignGroup23/fuel-quote-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect}from'react-router-dom';/* https://faizanv.medium.com/authentication-for-your-react-and-express-application-w-json-web-tokens-923515826e0#18d5 */import{jsx as _jsx}from\"react/jsx-runtime\";export default function withAuthorization(ComponentToProtect){return/*#__PURE__*/function(_Component){_inherits(_class,_Component);var _super=_createSuper(_class);function _class(){var _this;_classCallCheck(this,_class);_this=_super.call(this);_this.state={loading:true,redirect:false};return _this;}_createClass(_class,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('http://localhost:4000/checkToken').then(function(res){if(res.status===200){_this2.setState({loading:false});}else{var error=new Error(res.error);throw error;}}).catch(function(err){console.error(err);console.log('ERROR! in catch block in withAuthorization');_this2.setState({loading:false,redirect:true});});}},{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,redirect=_this$state.redirect;// console.log('inside withAuthoziation render block');\nif(loading){// console.log('/// in loading')\nreturn null;}else if(redirect){// console.log('/// in redirect')\nreturn/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(ComponentToProtect,_objectSpread({},this.props));}}]);return _class;}(Component);}","map":{"version":3,"sources":["/Users/macos10.12/Documents/GitHub/SoftwareDesignGroup23/fuel-quote-app/src/components/withAuthorization.js"],"names":["React","Component","Redirect","withAuthorization","ComponentToProtect","state","loading","redirect","fetch","then","res","status","setState","error","Error","catch","err","console","log","props"],"mappings":"q6BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CAEA,yH,2CAEA,cAAe,SAASC,CAAAA,iBAAT,CAA2BC,kBAA3B,CAA+C,CAC5D,qGACE,iBAAc,wCACZ,wBACA,MAAKC,KAAL,CAAa,CACXC,OAAO,CAAE,IADE,CAEXC,QAAQ,CAAE,KAFC,CAAb,CAFY,aAMb,CAPH,oDAQE,4BAAoB,iBAClBC,KAAK,CAAC,kCAAD,CAAL,CACGC,IADH,CACQ,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACtB,MAAI,CAACC,QAAL,CAAc,CAAEN,OAAO,CAAE,KAAX,CAAd,EACD,CAFD,IAEO,CACL,GAAMO,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,CAAUJ,GAAG,CAACG,KAAd,CAAd,CACA,KAAMA,CAAAA,KAAN,CACD,CACF,CARH,EASGE,KATH,CASS,SAAAC,GAAG,CAAI,CACZC,OAAO,CAACJ,KAAR,CAAcG,GAAd,EACAC,OAAO,CAACC,GAAR,CAAY,4CAAZ,EACA,MAAI,CAACN,QAAL,CAAc,CAAEN,OAAO,CAAE,KAAX,CAAkBC,QAAQ,CAAE,IAA5B,CAAd,EACD,CAbH,EAcD,CAvBH,sBAwBE,iBAAS,iBACuB,KAAKF,KAD5B,CACCC,OADD,aACCA,OADD,CACUC,QADV,aACUA,QADV,CAEP;AACA,GAAID,OAAJ,CAAa,CACX;AACA,MAAO,KAAP,CACD,CAHD,IAIK,IAAIC,QAAJ,CAAc,CACjB;AACA,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACD,CACD,mBAAO,KAAC,kBAAD,kBAAwB,KAAKY,KAA7B,EAAP,CACD,CApCH,oBAAqBlB,SAArB,EAsCD","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\n\n/* https://faizanv.medium.com/authentication-for-your-react-and-express-application-w-json-web-tokens-923515826e0#18d5 */\n\nexport default function withAuthorization(ComponentToProtect) {\n  return class extends Component {\n    constructor() {\n      super();\n      this.state = {\n        loading: true,\n        redirect: false,\n      };\n    }\n    componentDidMount() {\n      fetch('http://localhost:4000/checkToken')\n        .then((res) => {\n          if (res.status === 200) {\n            this.setState({ loading: false });\n          } else {\n            const error = new Error(res.error);\n            throw error;\n          }\n        })\n        .catch(err => {\n          console.error(err);\n          console.log('ERROR! in catch block in withAuthorization');\n          this.setState({ loading: false, redirect: true });\n        });\n    }\n    render() {\n      const { loading, redirect } = this.state;\n      // console.log('inside withAuthoziation render block');\n      if (loading) {\n        // console.log('/// in loading')\n        return null;\n      }\n      else if (redirect) {\n        // console.log('/// in redirect')\n        return <Redirect to=\"/\" />;\n      }\n      return <ComponentToProtect {...this.props} />;\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}