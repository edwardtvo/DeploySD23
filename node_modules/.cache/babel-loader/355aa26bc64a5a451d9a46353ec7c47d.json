{"ast":null,"code":"import _slicedToArray from\"/Users/macos10.12/Documents/GitHub/SoftwareDesignGroup23/fuel-quote-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Container,Button,Form,Row,Col,Modal}from'react-bootstrap';import React,{useEffect,useState}from\"react\";import NavBar from\"./NavBar\";import{connect}from'react-redux';import*as actions from'../store/actions/index.js';import{useHistory}from\"react-router-dom\";import axios from'axios';import{withCookies,useCookies}from'react-cookie';import'./ProfileManagement.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function simulateNetworkRequest(){return new Promise(function(resolve){return setTimeout(resolve,100);});}function ProfileManagement(props,auth){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),validated=_useState4[0],setValidated=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),fullname=_useState8[0],setFullname=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),address1=_useState10[0],setAddress1=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),address2=_useState12[0],setAddress2=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),city=_useState14[0],setCity=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),state=_useState16[0],setState=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),zip=_useState18[0],setZip=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),cookie_username=_useState20[0],setCookieusername=_useState20[1];var _useCookies=useCookies(['user']),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];var _useState21=useState({}),_useState22=_slicedToArray(_useState21,2),userData=_useState22[0],setUserData=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),modal_show=_useState24[0],setModalShow=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),modal_show_validation=_useState26[0],setModalShowValidation=_useState26[1];var history=useHistory();useEffect(function(){// get user info from cookies.user as axios.post\naxios.post('http://localhost:4000/users/current_user',{username:cookies.user}).then(function(res){if(res.status===200){setUserData(res.data);setCookieusername(cookies.user);setUsername(userData.username);setFullname(userData.fullname);setAddress1(userData.address1);setAddress2(userData.address2);setCity(userData.city);setState(userData.state);setZip(userData.zip);}else if(res.status===404){console.log('res.status: ',res.status);history.push('/');}}).catch(function(error){console.log('Error trying to fetch user data from cookie',error);});if(isLoading){simulateNetworkRequest().then(function(){setLoading(false);});}},[cookies.user,history,isLoading,userData.address1,userData.address2,userData.city,userData.fullname,userData.state,userData.username,userData.zip]);//const handleClick = () => setLoading(true);\nvar goToGetQuote=function goToGetQuote(){return history.push('/getquote');};var handleModalClose=function handleModalClose(){return setModalShow(false);};var handleModal2Close=function handleModal2Close(){return setModalShowValidation(false);};var handleRegexValidation=function handleRegexValidation(userObj){if(userObj.fullname.match(/^(.{2,100})$/)!=null&&userObj.address1.match(/^(.{2,200})$/)!=null&&userObj.city.match(/^(.{2,100})$/)!=null&&userObj.state.match(/^([A-Z]{2,2})$/)!=null&&userObj.zip.match(/^([0-9]{5,7})$/)!=null){console.log('all fields matched validation!');return true;}else return false;};var handleSubmit=function handleSubmit(event){var form=event.currentTarget;setValidated(false);event.preventDefault();if(form.checkValidity()===false){event.stopPropagation();}else{var userObj={cookie_username:cookies.user,username:cookies.user,fullname:fullname,address1:address1,address2:address2,city:city,state:state,zip:zip};console.log(userObj);if(handleRegexValidation(userObj)){console.log('handlRegexValidation: true');axios.post('http://localhost:4000/users/update',userObj).then(function(res){console.log(res.data);}).catch(function(error){console.log(error);});setValidated(true);setModalShow(true);//history.push(\"/getquote\");\n}else{console.log('handlRegexValidation: false');setValidated(false);setModalShowValidation(true);}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"profman-padding\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title-page\",children:\"Profile Management\"}),/*#__PURE__*/_jsx(\"div\",{style:{\"paddingTop\":\"50px\"}}),/*#__PURE__*/_jsxs(Form,{noValidate:true,validated:validated,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"3\"}),/*#__PURE__*/_jsxs(Col,{md:\"3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Full Name: \"}),/*#__PURE__*/_jsx(Form.Control,{name:\"fullname\",type:\"text\",value:fullname,onChange:function onChange(e){return setFullname(e.target.value);},required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please enter a real full name\"})]}),/*#__PURE__*/_jsxs(Col,{md:\"3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username: \"}),/*#__PURE__*/_jsx(Form.Control,{name:\"username\",type:\"text\",value:userData.username,onChange:function onChange(e){return setUsername(e.target.value);},required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please enter the same username from Registration\"})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"3\"}),/*#__PURE__*/_jsxs(Col,{md:\"4\",style:{\"paddingTop\":\"10px\"},children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Address: \"}),/*#__PURE__*/_jsx(Form.Control,{name:\"address\",type:\"text\",value:address1,onChange:function onChange(e){return setAddress1(e.target.value);},required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Address is required\"})]}),/*#__PURE__*/_jsxs(Col,{md:\"2\",style:{\"paddingTop\":\"10px\"},children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Address 2 (optional) : \"}),/*#__PURE__*/_jsx(Form.Control,{name:\"address\",type:\"text\",value:address2,onChange:function onChange(e){return setAddress2(e.target.value);},placeholder:\"Apt no., suite, etc.\"})]})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"3\"}),/*#__PURE__*/_jsxs(Col,{md:\"2\",style:{\"paddingTop\":\"10px\"},children:[/*#__PURE__*/_jsx(Form.Label,{children:\"City: \"}),/*#__PURE__*/_jsx(Form.Control,{name:\"city\",type:\"text\",value:city,onChange:function onChange(e){return setCity(e.target.value);},required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"City is required\"})]}),/*#__PURE__*/_jsxs(Col,{md:\"1\",style:{\"paddingTop\":\"10px\"},children:[/*#__PURE__*/_jsx(Form.Label,{children:\"State: \"}),/*#__PURE__*/_jsxs(Form.Control,{name:\"state\",as:\"select\",value:state,onChange:function onChange(e){return setState(e.target.value);},required:true,children:[/*#__PURE__*/_jsx(\"option\",{children:\" \"}),/*#__PURE__*/_jsx(\"option\",{children:\"AL\"}),/*#__PURE__*/_jsx(\"option\",{children:\"AK\"}),/*#__PURE__*/_jsx(\"option\",{children:\"AZ\"}),/*#__PURE__*/_jsx(\"option\",{children:\"AR\"}),/*#__PURE__*/_jsx(\"option\",{children:\"CA\"}),/*#__PURE__*/_jsx(\"option\",{children:\"CO\"}),/*#__PURE__*/_jsx(\"option\",{children:\"CT\"}),/*#__PURE__*/_jsx(\"option\",{children:\"DE\"}),/*#__PURE__*/_jsx(\"option\",{children:\"FL\"}),/*#__PURE__*/_jsx(\"option\",{children:\"GA\"}),/*#__PURE__*/_jsx(\"option\",{children:\"HI\"}),/*#__PURE__*/_jsx(\"option\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"option\",{children:\"IL\"}),/*#__PURE__*/_jsx(\"option\",{children:\"IN\"}),/*#__PURE__*/_jsx(\"option\",{children:\"IA\"}),/*#__PURE__*/_jsx(\"option\",{children:\"KS\"}),/*#__PURE__*/_jsx(\"option\",{children:\"KY\"}),/*#__PURE__*/_jsx(\"option\",{children:\"LA\"}),/*#__PURE__*/_jsx(\"option\",{children:\"ME\"}),/*#__PURE__*/_jsx(\"option\",{children:\"MD\"}),/*#__PURE__*/_jsx(\"option\",{children:\"MA\"}),/*#__PURE__*/_jsx(\"option\",{children:\"MI\"}),/*#__PURE__*/_jsx(\"option\",{children:\"MN\"}),/*#__PURE__*/_jsx(\"option\",{children:\"MS\"}),/*#__PURE__*/_jsx(\"option\",{children:\"MO\"}),/*#__PURE__*/_jsx(\"option\",{children:\"MT\"}),/*#__PURE__*/_jsx(\"option\",{children:\"NE\"}),/*#__PURE__*/_jsx(\"option\",{children:\"NV\"}),/*#__PURE__*/_jsx(\"option\",{children:\"NH\"}),/*#__PURE__*/_jsx(\"option\",{children:\"NJ\"}),/*#__PURE__*/_jsx(\"option\",{children:\"NM\"}),/*#__PURE__*/_jsx(\"option\",{children:\"NY\"}),/*#__PURE__*/_jsx(\"option\",{children:\"NC\"}),/*#__PURE__*/_jsx(\"option\",{children:\"ND\"}),/*#__PURE__*/_jsx(\"option\",{children:\"OH\"}),/*#__PURE__*/_jsx(\"option\",{children:\"OK\"}),/*#__PURE__*/_jsx(\"option\",{children:\"OR\"}),/*#__PURE__*/_jsx(\"option\",{children:\"PA\"}),/*#__PURE__*/_jsx(\"option\",{children:\"RI\"}),/*#__PURE__*/_jsx(\"option\",{children:\"SC\"}),/*#__PURE__*/_jsx(\"option\",{children:\"SD\"}),/*#__PURE__*/_jsx(\"option\",{children:\"TN\"}),/*#__PURE__*/_jsx(\"option\",{children:\"TX\"}),/*#__PURE__*/_jsx(\"option\",{children:\"UT\"}),/*#__PURE__*/_jsx(\"option\",{children:\"VT\"}),/*#__PURE__*/_jsx(\"option\",{children:\"VA\"}),/*#__PURE__*/_jsx(\"option\",{children:\"WA\"}),/*#__PURE__*/_jsx(\"option\",{children:\"WV\"}),/*#__PURE__*/_jsx(\"option\",{children:\"WI\"}),/*#__PURE__*/_jsx(\"option\",{children:\"WY\"})]}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please select a state\"})]}),/*#__PURE__*/_jsxs(Col,{md:\"1\",style:{\"paddingTop\":\"10px\"},children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Zip code: \"}),/*#__PURE__*/_jsx(Form.Control,{name:\"zip\",value:zip,onChange:function onChange(e){return setZip(e.target.value);},type:\"text\",required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Please enter a valid zip code\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"5\"}),/*#__PURE__*/_jsx(Col,{md:\"2\",style:{\"paddingTop\":\"1em\"},children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",type:\"submit\",children:\"Submit\"})})]})]})]}),/*#__PURE__*/_jsxs(Modal,{show:modal_show,onHide:function onHide(e){return handleModalClose();},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Profiled Updated!\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"t2\",{children:\"Your profile information has been updated\"})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(){return goToGetQuote();},children:\"Go to Get Quote\"})})]}),/*#__PURE__*/_jsxs(Modal,{show:modal_show_validation/* onHide={(handleModalClose)} */,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Invalid Inputs!\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"t2\",{children:\"Full name must be between 2 and 100 characters\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"t2\",{children:\"Address1 must be between 2 and 200 characters\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"t2\",{children:\"City must be between 2 and 100 characters\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"t2\",{children:\"One state must be selected\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"t2\",{children:\"Zip code must be between 5 and 7 numbers\"})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(){return handleModal2Close();},children:\"Close\"})})]})]});}export default ProfileManagement;","map":{"version":3,"sources":["/Users/macos10.12/Documents/GitHub/SoftwareDesignGroup23/fuel-quote-app/src/components/ProfileManagement.js"],"names":["Container","Button","Form","Row","Col","Modal","React","useEffect","useState","NavBar","connect","actions","useHistory","axios","withCookies","useCookies","simulateNetworkRequest","Promise","resolve","setTimeout","ProfileManagement","props","auth","isLoading","setLoading","validated","setValidated","username","setUsername","fullname","setFullname","address1","setAddress1","address2","setAddress2","city","setCity","state","setState","zip","setZip","cookie_username","setCookieusername","cookies","setCookie","userData","setUserData","modal_show","setModalShow","modal_show_validation","setModalShowValidation","history","post","user","then","res","status","data","console","log","push","catch","error","goToGetQuote","handleModalClose","handleModal2Close","handleRegexValidation","userObj","match","handleSubmit","event","form","currentTarget","preventDefault","checkValidity","stopPropagation","e","target","value"],"mappings":"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","sourcesContent":["import { Container, Button, Form, Row, Col, Modal } from 'react-bootstrap'\nimport React, { useEffect, useState } from \"react\";\nimport NavBar from \"./NavBar\";\nimport { connect } from 'react-redux'\nimport * as actions from '../store/actions/index.js'\nimport { useHistory } from \"react-router-dom\";\nimport axios from 'axios';\nimport { withCookies, useCookies } from 'react-cookie';\nimport './ProfileManagement.css'\n\n\n\n\nfunction simulateNetworkRequest() {\n  return new Promise((resolve) => setTimeout(resolve, 100));\n}\n\n\nfunction ProfileManagement(props,auth) {\n\n  const [isLoading, setLoading] = useState(false);\n  const [validated, setValidated] = useState(false)\n  const [username, setUsername] = useState('');\n  const [fullname, setFullname] = useState('');\n  const [address1, setAddress1] = useState('');\n  const [address2, setAddress2] = useState('');\n  const [city, setCity] = useState('');\n  const [state, setState] = useState('');\n  const [zip, setZip] = useState('');\n  const [cookie_username, setCookieusername] = useState('');\n  const [cookies, setCookie] = useCookies(['user'])\n  const [userData, setUserData] = useState({});\n  const [modal_show, setModalShow] = useState(false);\n  const [modal_show_validation, setModalShowValidation] = useState(false);\n\n\n  let history=useHistory();\n\n    useEffect(() => {\n\n        // get user info from cookies.user as axios.post\n        axios.post('http://localhost:4000/users/current_user', { username: cookies.user })\n        .then((res) => {\n          if (res.status === 200) {\n          setUserData(res.data);\n          setCookieusername(cookies.user);\n          setUsername(userData.username);\n          setFullname(userData.fullname);\n          setAddress1(userData.address1);\n          setAddress2(userData.address2);\n          setCity(userData.city);\n          setState(userData.state);\n          setZip(userData.zip);\n          }\n          else if (res.status === 404) {\n            console.log('res.status: ', res.status)\n            history.push('/')\n          }\n        }).catch((error) => {\n          console.log('Error trying to fetch user data from cookie',error);\n        })\n\n        if (isLoading) {\n          simulateNetworkRequest().then(() => {\n            setLoading(false);\n          });\n        }\n      }, [cookies.user, history, isLoading, userData.address1, userData.address2, userData.city, userData.fullname, userData.state, userData.username, userData.zip]);\n\n  //const handleClick = () => setLoading(true);\n\n  const goToGetQuote = () => history.push('/getquote');\n  const handleModalClose = () => setModalShow(false);\n  const handleModal2Close = () => setModalShowValidation(false);\n\n\n  const handleRegexValidation = (userObj) => {\n    if ( (userObj.fullname.match(/^(.{2,100})$/) != null) &&\n        (userObj.address1.match(/^(.{2,200})$/) != null) &&\n        (userObj.city.match(/^(.{2,100})$/) != null) &&\n        (userObj.state.match(/^([A-Z]{2,2})$/) != null) &&\n        (userObj.zip.match(/^([0-9]{5,7})$/) != null) ) \n        {\n        console.log('all fields matched validation!')\n        return true;\n        }\n    else \n      return false;\n\n  }\n\n  const handleSubmit = (event) => {\n    const form = event.currentTarget;\n    setValidated(false);\n    event.preventDefault();\n\n    if (form.checkValidity() === false) {\n      event.stopPropagation();\n    } else {\n\n    const userObj = {\n      cookie_username: cookies.user,\n      username: cookies.user,\n      fullname: fullname,\n      address1: address1,\n      address2: address2,\n      city: city,\n      state: state,\n      zip: zip\n    }\n\n    console.log(userObj);\n\n      if (handleRegexValidation(userObj)) {\n        console.log('handlRegexValidation: true');\n          axios.post('http://localhost:4000/users/update', userObj)\n          .then((res) => {\n              console.log(res.data)\n          }).catch((error) => {\n          console.log(error)\n          });\n          setValidated(true);\n          setModalShow(true);\n          //history.push(\"/getquote\");\n      } else {\n        console.log('handlRegexValidation: false');\n        setValidated(false);\n        setModalShowValidation(true);\n      }\n\n    }\n\n  }\n\n  return (\n    <div>\n    <Container fluid className='profman-padding'>\n\n    <h1 className=\"title-page\">Profile Management</h1>\n    <div style={{\"paddingTop\":\"50px\"}}/>\n\n        <Form noValidate validated={validated} onSubmit={handleSubmit}>\n        <Row>\n          <Col md=\"3\"/>\n          <Col md=\"3\">\n            <Form.Label>Full Name: </Form.Label>\n            <Form.Control name=\"fullname\" \n                          type=\"text\"\n                          value={fullname}\n                          onChange={(e) => setFullname(e.target.value)}\n                          required/>\n            <Form.Control.Feedback type=\"invalid\">Please enter a real full name</Form.Control.Feedback>\n          </Col>\n          <Col md=\"3\">\n            <Form.Label>Username: </Form.Label>\n            <Form.Control name=\"username\"\n                          type=\"text\"\n                          value={userData.username}\n                          onChange={(e) => setUsername(e.target.value)}\n                          required/>\n            <Form.Control.Feedback type=\"invalid\">Please enter the same username from Registration</Form.Control.Feedback>\n          </Col>\n        </Row>\n        \n \n        <Row>\n\n          <Col md=\"3\"/>\n          <Col md=\"4\" style={{\"paddingTop\":\"10px\"}}>\n            <Form.Label>Address: </Form.Label>\n            <Form.Control name=\"address\" \n                          type=\"text\" \n                          value={address1}\n                          onChange={(e) => setAddress1(e.target.value)}\n                          required/>\n            <Form.Control.Feedback type=\"invalid\">Address is required</Form.Control.Feedback>\n\n            \n          </Col>\n          <Col md=\"2\" style={{\"paddingTop\":\"10px\"}}>\n            <Form.Label> Address 2 (optional) : </Form.Label>\n            <Form.Control name=\"address\" \n                          type=\"text\" \n                          value={address2}\n                          onChange={(e) => setAddress2(e.target.value)}\n                          placeholder=\"Apt no., suite, etc.\"/>\n          </Col>\n        </Row>\n  \n          \n\n        <Row>\n          <Col md=\"3\"/>\n          <Col md=\"2\" style={{\"paddingTop\":\"10px\"}}>\n          <Form.Label>City: </Form.Label>\n          <Form.Control name=\"city\" \n                        type=\"text\" \n                        value={city}\n                        onChange={(e) => setCity(e.target.value)}\n                        required/>\n          <Form.Control.Feedback type=\"invalid\">City is required</Form.Control.Feedback>\n          </Col>\n        \n\n          <Col md=\"1\" style={{\"paddingTop\":\"10px\"}}>\n          <Form.Label>State: </Form.Label>\n          <Form.Control name = \"state\" as=\"select\" \n                        value={state} \n                        onChange={(e) => setState(e.target.value)}\n                        required>\n          <option> </option>\n          <option>AL</option><option>AK</option><option>AZ</option>\n          <option>AR</option><option>CA</option><option>CO</option>\n          <option>CT</option><option>DE</option><option>FL</option>\n          <option>GA</option><option>HI</option><option>ID</option>\n          <option>IL</option><option>IN</option><option>IA</option>\n          <option>KS</option><option>KY</option><option>LA</option>\n          <option>ME</option><option>MD</option><option>MA</option>\n          <option>MI</option><option>MN</option><option>MS</option>\n          <option>MO</option><option>MT</option><option>NE</option>\n          <option>NV</option><option>NH</option><option>NJ</option>\n          <option>NM</option><option>NY</option><option>NC</option>\n          <option>ND</option><option>OH</option><option>OK</option>\n          <option>OR</option><option>PA</option><option>RI</option>\n          <option>SC</option><option>SD</option><option>TN</option>\n          <option>TX</option><option>UT</option><option>VT</option>\n          <option>VA</option><option>WA</option><option>WV</option>\n          <option>WI</option><option>WY</option>\n          </Form.Control>\n          <Form.Control.Feedback type=\"invalid\">Please select a state</Form.Control.Feedback>\n\n          </Col>\n\n          \n          <Col md=\"1\" style={{\"paddingTop\":\"10px\"}}>\n          <Form.Label> Zip code: </Form.Label>\n          <Form.Control name=\"zip\" \n                        value={zip}\n                        onChange={(e) => setZip(e.target.value)}\n                        type=\"text\" \n                        required/>\n          <Form.Control.Feedback type=\"invalid\">Please enter a valid zip code</Form.Control.Feedback>\n          </Col>\n        </Row>\n            \n\n\n        <br />\n\n        {/* figure out validation before submitting */}\n      <Row><Col md=\"5\"/><Col md=\"2\" style={{\"paddingTop\":\"1em\"}}><Button variant=\"danger\" type=\"submit\">Submit</Button></Col></Row>\n\n              {/*disabled={isLoading} \n              onClick={!isLoading ? handleClick : null}\n              href=\"/quoteform\">\n                {isLoading ? 'Submitting..' : 'Submit'}</Button>{' '}*/}\n        \n\n        \n\n\n        \n        </Form>\n      \n\n    </Container>\n\n                <Modal\n                    show={modal_show}\n                    onHide={(e) => handleModalClose()}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Profiled Updated!</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <t2>Your profile information has been updated</t2>\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Button variant='danger' onClick={() => goToGetQuote()}>Go to Get Quote</Button>\n                    </Modal.Footer>\n                </Modal>\n                <Modal\n                    show={modal_show_validation}\n                    /* onHide={(handleModalClose)} */>\n                    <Modal.Header closeButton>\n                        <Modal.Title>Invalid Inputs!</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <t2>Full name must be between 2 and 100 characters</t2><br/>\n                        <t2>Address1 must be between 2 and 200 characters</t2><br/>\n                        <t2>City must be between 2 and 100 characters</t2><br/>\n                        <t2>One state must be selected</t2><br/>\n                        <t2>Zip code must be between 5 and 7 numbers</t2>\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Button variant='danger' onClick={() => handleModal2Close()}>Close</Button>\n                    </Modal.Footer>\n                </Modal>\n    </div>\n  );\n}\n\n\nexport default ProfileManagement;\n"]},"metadata":{},"sourceType":"module"}